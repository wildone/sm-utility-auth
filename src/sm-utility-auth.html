<dom-module id="sm-utility-auth">
  <template>
    <iron-ajax
        id="ajax"
        method="POST"
        loading="{{busy}}"
        url="[[_url]]"
        body="[[_request]]"
        handle-as="json"
        content-type="application/json"
        on-response="_handleSuccess"
        on-error="_handleError"
        headers="[[_computeHeaders(token)]]"
        debounce-duration="300"></iron-ajax>
    </iron-ajax>

    <!-- Shared data -->
    <sm-utility-share type="auth" key="token" value="{{token}}"></sm-utility-share>
    <sm-utility-share type="auth" key="email" value="{{email}}"></sm-utility-share>
    <sm-utility-share type="auth" key="password" value="{{password}}"></sm-utility-share>
    <sm-utility-share type="auth" key="error" value="{{error}}"></sm-utility-share>
    <sm-utility-share type="auth" key="busy" value="{{busy}}"></sm-utility-share>
    <sm-utility-share type="auth" key="_server" value="{{_server}}"></sm-utility-share>
  </template>
  <script src="./sm-utility-auth.js"></script>
</dom-module>
